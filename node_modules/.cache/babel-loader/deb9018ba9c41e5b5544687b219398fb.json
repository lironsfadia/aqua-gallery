{"ast":null,"code":"import _slicedToArray from \"/home/trellis/react-node-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/home/trellis/react-node-app/client/src/api/DataProvider.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\nimport { getRequestContext } from './Context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction createAuthorizationHeaders() {\n  return {\n    headers: {\n      'Access-Control-Allow-Origin': '*'\n    }\n  };\n}\n\nexport function DataProvider(_ref) {\n  _s();\n\n  var Calculator = _ref.calculator,\n      Layout = _ref.layout,\n      url = _ref.url;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var refreshDataInterval = 10000;\n  useEffect(function () {\n    if (url !== '') {\n      var updateData = function updateData() {\n        axios.get(url, createAuthorizationHeaders()).then(function (response) {\n          console.log(\"SUCCESS\", response);\n          setData(response.data);\n        }).catch(function (error) {\n          console.log(error);\n        });\n      };\n\n      var timer = setInterval(function () {\n        updateData();\n      }, refreshDataInterval);\n      updateData();\n      return function () {\n        return clearInterval(timer);\n      };\n    }\n  }, [url]);\n  var Provider = getRequestContext.Provider;\n  return /*#__PURE__*/_jsxDEV(Provider, {\n    value: data,\n    children: /*#__PURE__*/_jsxDEV(Calculator, {\n      layout: Layout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n}\n\n_s(DataProvider, \"fQZRxy/+nAZ7NLS1X4dVhrlp8Go=\");\n\n_c = DataProvider;\nDataProvider.propTypes = {\n  calculator: PropTypes.func.isRequired,\n  url: PropTypes.string.isRequired\n};\nexport default DataProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"DataProvider\");","map":{"version":3,"sources":["/home/trellis/react-node-app/client/src/api/DataProvider.js"],"names":["React","useState","useEffect","PropTypes","axios","getRequestContext","createAuthorizationHeaders","headers","DataProvider","Calculator","calculator","Layout","layout","url","data","setData","refreshDataInterval","updateData","get","then","response","console","log","catch","error","timer","setInterval","clearInterval","Provider","propTypes","func","isRequired","string"],"mappings":";;;;;AACA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,iBAAT,QAAkC,WAAlC;;;AAEA,SAASC,0BAAT,GAAsC;AAClC,SAAO;AACLC,IAAAA,OAAO,EAAE;AACP,qCAA+B;AADxB;AADJ,GAAP;AAKD;;AAEH,OAAO,SAASC,YAAT,OAAuE;AAAA;;AAAA,MAAlCC,UAAkC,QAA/CC,UAA+C;AAAA,MAAdC,MAAc,QAAtBC,MAAsB;AAAA,MAANC,GAAM,QAANA,GAAM;;AAC1E,kBAAwBZ,QAAQ,CAAC,IAAD,CAAhC;AAAA;AAAA,MAAOa,IAAP;AAAA,MAAaC,OAAb;;AACA,MAAMC,mBAAmB,GAAG,KAA5B;AAEAd,EAAAA,SAAS,CAAC,YAAK;AACX,QAAGW,GAAG,KAAK,EAAX,EAAe;AACb,UAAMI,UAAU,GAAG,SAAbA,UAAa,GAAM;AACrBb,QAAAA,KAAK,CAACc,GAAN,CAAUL,GAAV,EAAeP,0BAA0B,EAAzC,EAA6Ca,IAA7C,CAAkD,UAAAC,QAAQ,EAAI;AAC1DC,UAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBF,QAAvB;AACAL,UAAAA,OAAO,CAACK,QAAQ,CAACN,IAAV,CAAP;AACH,SAHD,EAGGS,KAHH,CAGS,UAAAC,KAAK,EAAI;AACdH,UAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ;AACH,SALD;AAMD,OAPH;;AASE,UAAMC,KAAK,GAAGC,WAAW,CAAC,YAAM;AAC9BT,QAAAA,UAAU;AACX,OAFwB,EAEtBD,mBAFsB,CAAzB;AAIAC,MAAAA,UAAU;AAEV,aAAO;AAAA,eAAKU,aAAa,CAACF,KAAD,CAAlB;AAAA,OAAP;AACH;AACJ,GAnBQ,EAmBP,CAACZ,GAAD,CAnBO,CAAT;AAqBA,MAAQe,QAAR,GAAqBvB,iBAArB,CAAQuB,QAAR;AAEA,sBACI,QAAC,QAAD;AAAU,IAAA,KAAK,EAAEd,IAAjB;AAAA,2BACI,QAAC,UAAD;AAAY,MAAA,MAAM,EAAEH;AAApB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAKH;;GAhCeH,Y;;KAAAA,Y;AAkChBA,YAAY,CAACqB,SAAb,GAAyB;AACrBnB,EAAAA,UAAU,EAAEP,SAAS,CAAC2B,IAAV,CAAeC,UADN;AAErBlB,EAAAA,GAAG,EAAEV,SAAS,CAAC6B,MAAV,CAAiBD;AAFD,CAAzB;AAKA,eAAevB,YAAf","sourcesContent":["\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\nimport { getRequestContext } from './Context'\n\nfunction createAuthorizationHeaders() {\n    return {\n      headers: {\n        'Access-Control-Allow-Origin': '*'\n      },\n    };\n  }\n\nexport function DataProvider({ calculator : Calculator, layout: Layout, url }){\n    const [data, setData] = useState(null);\n    const refreshDataInterval = 10000;\n\n    useEffect(() =>{\n        if(url !== '') {\n          const updateData = () => {\n              axios.get(url, createAuthorizationHeaders()).then(response => {\n                  console.log(\"SUCCESS\", response)\n                  setData(response.data)\n              }).catch(error => {\n                  console.log(error)\n              })\n            }\n\n            const timer = setInterval(() => {\n              updateData()\n            }, refreshDataInterval);\n\n            updateData();\n\n            return ()=> clearInterval(timer) \n        }\n    },[url])\n\n    const { Provider } = getRequestContext;\n\n    return(\n        <Provider value={data}>\n            <Calculator layout={Layout}/>\n        </Provider>\n    )\n}\n\nDataProvider.propTypes = {\n    calculator: PropTypes.func.isRequired,\n    url: PropTypes.string.isRequired,\n};\n\nexport default DataProvider;"]},"metadata":{},"sourceType":"module"}