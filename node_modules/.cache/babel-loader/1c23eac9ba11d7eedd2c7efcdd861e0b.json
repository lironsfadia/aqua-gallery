{"ast":null,"code":"var _jsxFileName = \"/home/trellis/react-node-app/client/src/layout/LeafletMap.js\",\n    _s = $RefreshSig$();\n\nimport PropTypes from 'prop-types';\nimport { MapContainer, TileLayer, Marker, Tooltip } from 'react-leaflet';\nimport L from 'leaflet';\nimport MarkerClusterGroup from 'react-leaflet-cluster';\nimport Skeleton from '@mui/material/Skeleton';\nimport { iconTractorIdle, iconTractorOnMission, iconTractorUnreachable, iconDroneIdle, iconDroneOnMission, iconDroneUnreachable } from '../icons/Icon';\nimport { useWidth } from '../customHooks/useWidth';\nimport '../styles.css';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar idle_status = 'idle';\nvar on_mission_status = 'on-mission';\nvar unreachable_status = 'unreachable';\nvar drone_type = 'drone';\n\nfunction getIconByTypeAndStatus(type, status) {\n  var icon = null;\n\n  switch (status) {\n    case idle_status:\n      icon = type === drone_type ? iconDroneIdle : iconTractorIdle;\n      break;\n\n    case on_mission_status:\n      icon = type === drone_type ? iconDroneOnMission : iconTractorOnMission;\n      break;\n\n    case unreachable_status:\n      icon = type === drone_type ? iconDroneUnreachable : iconTractorUnreachable;\n      break;\n\n    default:\n  }\n\n  return icon;\n}\n\nfunction LeafletMap(_ref) {\n  _s();\n\n  var _this = this;\n\n  var data = _ref.data;\n  var isMobile = useWidth() <= 1024;\n  console.log(useWidth());\n\n  var prepareTooltipText = function prepareTooltipText(element) {\n    var tooltipText = /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n\n    if (Object.prototype.hasOwnProperty.call(element, '_id') && Object.prototype.hasOwnProperty.call(element, 'type') && Object.prototype.hasOwnProperty.call(element, 'status')) {\n      tooltipText = /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"front-tooltip-class\",\n        style: {\n          fontSize: isMobile ? '30px' : '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: [\"Hello \", element.type, \"!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 27\n        }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 55\n        }, _this), \"Your status is '\", element.status, \"' right now...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 27\n      }, _this);\n    }\n\n    return tooltipText;\n  };\n\n  var prepareDisplay = function prepareDisplay() {\n    return /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: [65.74101998457737, 47.62268066406251],\n      zoom: 14,\n      scrollWheelZoom: true,\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n        attribution: \"\\xA9 <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(MarkerClusterGroup, {\n        spiderfyDistanceMultiplier: 1,\n        showCoverageOnHover: true,\n        maxClusterRadius: 50,\n        spiderfyOnMaxZoom: true,\n        polygonOptions: {\n          fillColor: '#ffffff',\n          color: '#f00800',\n          weight: 5,\n          opacity: 1,\n          fillOpacity: 0.8\n        },\n        children: data.vehicles.map(function (element) {\n          return /*#__PURE__*/_jsxDEV(Marker, {\n            position: [element.location.latitude, element.location.longitude],\n            draggable: true,\n            icon: getIconByTypeAndStatus(element.type, element.status),\n            children: /*#__PURE__*/_jsxDEV(Tooltip, {\n              opacity: '0.8',\n              direction: 'top',\n              offset: L.point(0, -26),\n              closeOnClick: false,\n              sticky: true,\n              children: prepareTooltipText(element)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 29\n            }, _this)\n          }, element._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, _this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: data ? prepareDisplay : /*#__PURE__*/_jsxDEV(Skeleton, {\n      animation: \"wave\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 36\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 9\n  }, this);\n}\n\n_s(LeafletMap, \"b/kO8TnbBQc3ej9fYIoXn0Zrlgw=\", false, function () {\n  return [useWidth, useWidth];\n});\n\n_c = LeafletMap;\nLeafletMap.propTypes = {\n  data: PropTypes.object\n};\nexport default LeafletMap;\n\nvar _c;\n\n$RefreshReg$(_c, \"LeafletMap\");","map":{"version":3,"sources":["/home/trellis/react-node-app/client/src/layout/LeafletMap.js"],"names":["PropTypes","MapContainer","TileLayer","Marker","Tooltip","L","MarkerClusterGroup","Skeleton","iconTractorIdle","iconTractorOnMission","iconTractorUnreachable","iconDroneIdle","iconDroneOnMission","iconDroneUnreachable","useWidth","idle_status","on_mission_status","unreachable_status","drone_type","getIconByTypeAndStatus","type","status","icon","LeafletMap","data","isMobile","console","log","prepareTooltipText","element","tooltipText","Object","prototype","hasOwnProperty","call","fontSize","prepareDisplay","fillColor","color","weight","opacity","fillOpacity","vehicles","map","location","latitude","longitude","point","_id","propTypes","object"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport { MapContainer, \n         TileLayer,\n         Marker,\n         Tooltip, \n} from 'react-leaflet';\nimport L from 'leaflet';\nimport MarkerClusterGroup from 'react-leaflet-cluster'\nimport Skeleton from '@mui/material/Skeleton';\nimport { iconTractorIdle, \n         iconTractorOnMission,\n         iconTractorUnreachable, \n         iconDroneIdle,\n         iconDroneOnMission,\n         iconDroneUnreachable ,\n} from '../icons/Icon';\nimport { useWidth } from '../customHooks/useWidth';\nimport '../styles.css';\n\nconst idle_status = 'idle';\nconst on_mission_status = 'on-mission';\nconst unreachable_status = 'unreachable';\nconst drone_type = 'drone';\n\nfunction getIconByTypeAndStatus(type, status){\n    var icon = null;\n    switch(status) {\n        case idle_status:\n           icon = type === drone_type ? iconDroneIdle : iconTractorIdle;\n          break;\n        case on_mission_status:\n            icon = type === drone_type ? iconDroneOnMission : iconTractorOnMission;\n          break;\n        case unreachable_status:\n            icon = type === drone_type ? iconDroneUnreachable : iconTractorUnreachable;\n            break;\n        default:\n      }\n    return icon;     \n}\nfunction LeafletMap({ data }) {\n    const isMobile = useWidth() <= 1024;\n    console.log(useWidth())\n    const prepareTooltipText = (element) => {\n        var tooltipText = <></>\n        if(Object.prototype.hasOwnProperty.call(element, '_id') &&\n           Object.prototype.hasOwnProperty.call(element, 'type') &&\n           Object.prototype.hasOwnProperty.call(element, 'status')) {\n            tooltipText = <div className='front-tooltip-class' style={{ fontSize: isMobile ? '30px' : '20px' }}>\n                          <b>Hello {element.type}!</b><br/>\n                          Your status is '{element.status}' right now...\n                          </div>\n        }\n        return tooltipText;\n    }\n\n    const prepareDisplay = () => {\n        return (\n            <MapContainer center={[65.74101998457737, 47.62268066406251]} zoom={14} scrollWheelZoom={true}>\n                <TileLayer\n                    url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n                    attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors' />\n                <MarkerClusterGroup\n                    spiderfyDistanceMultiplier={1}\n                    showCoverageOnHover={true}\n                    maxClusterRadius={50}\n                    spiderfyOnMaxZoom={true}\n                    polygonOptions={{\n                        fillColor: '#ffffff',\n                        color: '#f00800',\n                        weight: 5,\n                        opacity: 1,\n                        fillOpacity: 0.8,\n                    }}\n                >\n                    {data.vehicles.map(element => (\n                        <Marker\n                            key={element._id}\n                            position={[\n                                element.location.latitude,\n                                element.location.longitude\n                            ]}\n                            draggable={true}\n                            icon={getIconByTypeAndStatus(element.type, element.status)}\n                        >\n                            <Tooltip\n                                opacity={'0.8'}\n                                direction={'top'}\n                                offset={L.point(0, -26)}\n                                closeOnClick={false}\n                                sticky={true}>\n                                {prepareTooltipText(element)}\n                            </Tooltip>\n                        </Marker>\n                    ))}\n                </MarkerClusterGroup>\n            </MapContainer>\n        );\n    };\n\n      return (\n        <div>\n        { data ? prepareDisplay :  <Skeleton animation=\"wave\" /> }\n      </div>\n      );\n}\n\nLeafletMap.propTypes = {\n    data: PropTypes.object,\n};\n  \nexport default LeafletMap;"]},"metadata":{},"sourceType":"module"}