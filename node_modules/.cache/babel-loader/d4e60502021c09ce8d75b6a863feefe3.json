{"ast":null,"code":"import _slicedToArray from \"/home/trellis/react-gallery-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/home/trellis/react-gallery-app/src/api/DataProvider.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\nimport { getRequestContext } from '../contexts/Context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction createAuthorizationHeaders() {\n  return {\n    headers: {\n      'Access-Control-Allow-Origin': '*'\n    }\n  };\n}\n\nexport function DataProvider(_ref) {\n  _s();\n\n  var Calculator = _ref.calculator,\n      Layout = _ref.layout,\n      url = _ref.url,\n      dataAmount = _ref.dataAmount;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  useEffect(function () {\n    if (url !== '' && !localStorage.getItem(\"imagesData\")) {\n      var updateData = function updateData() {\n        axios.get(url, createAuthorizationHeaders()).then(function (response) {\n          setData(response.data.slice(0, dataAmount));\n        }).catch(function (error) {\n          console.log(error);\n        });\n      };\n\n      updateData();\n      console.log(localStorage.getItem(\"imagesData\"));\n    }\n  }, [url]);\n  var Provider = getRequestContext.Provider;\n  return /*#__PURE__*/_jsxDEV(Provider, {\n    value: data,\n    children: /*#__PURE__*/_jsxDEV(Calculator, {\n      layout: Layout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n\n_s(DataProvider, \"fQZRxy/+nAZ7NLS1X4dVhrlp8Go=\");\n\n_c = DataProvider;\nDataProvider.defaultProps = {\n  dataAmount: 100\n};\nDataProvider.propTypes = {\n  calculator: PropTypes.func.isRequired,\n  url: PropTypes.string.isRequired,\n  dataAmount: PropTypes.number.isRequired\n};\nexport default DataProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"DataProvider\");","map":{"version":3,"sources":["/home/trellis/react-gallery-app/src/api/DataProvider.js"],"names":["React","useState","useEffect","PropTypes","axios","getRequestContext","createAuthorizationHeaders","headers","DataProvider","Calculator","calculator","Layout","layout","url","dataAmount","data","setData","localStorage","getItem","updateData","get","then","response","slice","catch","error","console","log","Provider","defaultProps","propTypes","func","isRequired","string","number"],"mappings":";;;;;AACA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SAASC,iBAAT,QAAkC,qBAAlC;;;AAEA,SAASC,0BAAT,GAAsC;AACpC,SAAO;AACLC,IAAAA,OAAO,EAAE;AACP,qCAA+B;AADxB;AADJ,GAAP;AAKD;;AAED,OAAO,SAASC,YAAT,OAGS;AAAA;;AAAA,MAH2BC,UAG3B,QAHeC,UAGf;AAAA,MAFNC,MAEM,QAFdC,MAEc;AAAA,MADdC,GACc,QADdA,GACc;AAAA,MAAdC,UAAc,QAAdA,UAAc;;AACd,kBAAwBb,QAAQ,CAAC,IAAD,CAAhC;AAAA;AAAA,MAAOc,IAAP;AAAA,MAAaC,OAAb;;AAEAd,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIW,GAAG,KAAK,EAAR,IAAc,CAACI,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAnB,EAAuD;AACrD,UAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvBf,QAAAA,KAAK,CAACgB,GAAN,CAAUP,GAAV,EAAeP,0BAA0B,EAAzC,EAA6Ce,IAA7C,CAAkD,UAAAC,QAAQ,EAAI;AAC5DN,UAAAA,OAAO,CAACM,QAAQ,CAACP,IAAT,CAAcQ,KAAd,CAAoB,CAApB,EAAuBT,UAAvB,CAAD,CAAP;AACD,SAFD,EAEGU,KAFH,CAES,UAAAC,KAAK,EAAI;AAChBC,UAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,SAJD;AAKD,OAND;;AAOAN,MAAAA,UAAU;AACVO,MAAAA,OAAO,CAACC,GAAR,CAAYV,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAZ;AACD;AACF,GAZQ,EAYN,CAACL,GAAD,CAZM,CAAT;AAcA,MAAQe,QAAR,GAAqBvB,iBAArB,CAAQuB,QAAR;AAEA,sBACE,QAAC,QAAD;AAAU,IAAA,KAAK,EAAEb,IAAjB;AAAA,2BACE,QAAC,UAAD;AAAY,MAAA,MAAM,EAAEJ;AAApB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAKD;;GA3BeH,Y;;KAAAA,Y;AA6BhBA,YAAY,CAACqB,YAAb,GAA4B;AAC1Bf,EAAAA,UAAU,EAAE;AADc,CAA5B;AAIAN,YAAY,CAACsB,SAAb,GAAyB;AACvBpB,EAAAA,UAAU,EAAEP,SAAS,CAAC4B,IAAV,CAAeC,UADJ;AAEvBnB,EAAAA,GAAG,EAAEV,SAAS,CAAC8B,MAAV,CAAiBD,UAFC;AAGvBlB,EAAAA,UAAU,EAAEX,SAAS,CAAC+B,MAAV,CAAiBF;AAHN,CAAzB;AAMA,eAAexB,YAAf","sourcesContent":["\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\n\nimport { getRequestContext } from '../contexts/Context'\n\nfunction createAuthorizationHeaders() {\n  return {\n    headers: {\n      'Access-Control-Allow-Origin': '*'\n    },\n  };\n}\n\nexport function DataProvider({ calculator: Calculator,\n  layout: Layout,\n  url,\n  dataAmount }) {\n  const [data, setData] = useState(null);\n\n  useEffect(() => {\n    if (url !== '' && !localStorage.getItem(\"imagesData\")) {\n      const updateData = () => {\n        axios.get(url, createAuthorizationHeaders()).then(response => {\n          setData(response.data.slice(0, dataAmount))\n        }).catch(error => {\n          console.log(error)\n        })\n      }\n      updateData();\n      console.log(localStorage.getItem(\"imagesData\"));\n    }\n  }, [url])\n\n  const { Provider } = getRequestContext;\n\n  return (\n    <Provider value={data}>\n      <Calculator layout={Layout} />\n    </Provider>\n  )\n}\n\nDataProvider.defaultProps = {\n  dataAmount: 100\n}\n\nDataProvider.propTypes = {\n  calculator: PropTypes.func.isRequired,\n  url: PropTypes.string.isRequired,\n  dataAmount: PropTypes.number.isRequired,\n};\n\nexport default DataProvider;"]},"metadata":{},"sourceType":"module"}